<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í¬ì¼“ìŒ¤ - ë‚˜ë§Œì˜ í•™ìŠµ íŒŒíŠ¸ë„ˆ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .app-container {
            max-width: 414px;
            margin: 0 auto;
            background: white;
            min-height: 100vh;
            position: relative;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }
        
        .gradient-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .character-container {
            background: linear-gradient(135deg, #ffeaa7 0%, #fab1a0 100%);
            border-radius: 20px;
            position: relative;
            overflow: hidden;
        }
        
        .character {
            width: 120px;
            height: 120px;
            margin: 0 auto;
            position: relative;
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        .stat-bar {
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .stat-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 0.5s ease;
        }
        
        .timer-circle {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            background: conic-gradient(#667eea 0deg, #e0e0e0 0deg);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            margin: 0 auto;
        }
        
        .timer-inner {
            width: 160px;
            height: 160px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }
        
        .menu-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            display: none;
        }
        
        .menu-panel {
            position: fixed;
            top: 0;
            right: -300px;
            width: 300px;
            height: 100vh;
            background: white;
            transition: right 0.3s ease;
            z-index: 1001;
            overflow-y: auto;
        }
        
        .menu-panel.open {
            right: 0;
        }
        
        .page {
            display: none;
        }
        
        .page.active {
            display: block;
        }
        
        .subject-color-1 { background: #ff6b6b; }
        .subject-color-2 { background: #4ecdc4; }
        .subject-color-3 { background: #45b7d1; }
        .subject-color-4 { background: #96ceb4; }
        .subject-color-5 { background: #feca57; }
        .subject-color-6 { background: #ff9ff3; }
        
        .timetable-cell {
            min-height: 60px;
            border: 1px solid #e0e0e0;
            position: relative;
        }
        
        .chat-bubble {
            animation: slideUp 0.3s ease;
        }
        
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: 414px;
            background: white;
            border-top: 1px solid #e0e0e0;
            z-index: 100;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Menu Overlay -->
        <div class="menu-overlay" id="menuOverlay" onclick="closeMenu()"></div>
        
        <!-- Menu Panel -->
        <div class="menu-panel" id="menuPanel">
            <div class="p-6">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-xl font-bold">ì„¤ì •</h2>
                    <button onclick="closeMenu()" class="text-2xl">Ã—</button>
                </div>
                
                <!-- Language Setting -->
                <div class="mb-6">
                    <h3 class="font-semibold mb-3" id="settingLanguage">ì–¸ì–´ ì„¤ì •</h3>
                    <div class="space-y-2">
                        <label class="flex items-center">
                            <input type="radio" name="language" value="ko" checked class="mr-2" onchange="changeLanguage('ko')">
                            <span>ğŸ‡°ğŸ‡· í•œêµ­ì–´</span>
                        </label>
                        <label class="flex items-center">
                            <input type="radio" name="language" value="ja" class="mr-2" onchange="changeLanguage('ja')">
                            <span>ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª</span>
                        </label>
                    </div>
                </div>
                
                <!-- School Information -->
                <div class="mb-6">
                    <h3 class="font-semibold mb-3" id="settingSchool">í•™êµ ì •ë³´</h3>
                    <div class="space-y-3">
                        <div>
                            <label class="block text-sm font-medium mb-1" id="schoolTypeLabel">í•™êµ êµ¬ë¶„</label>
                            <select id="schoolType" class="w-full p-2 border rounded-lg">
                                <option value="middle">ì¤‘í•™êµ</option>
                                <option value="high">ê³ ë“±í•™êµ</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-1" id="gradeLabel">í•™ë…„</label>
                            <select id="grade" class="w-full p-2 border rounded-lg">
                                <option value="1">1í•™ë…„</option>
                                <option value="2">2í•™ë…„</option>
                                <option value="3">3í•™ë…„</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <!-- Exam Type -->
                <div class="mb-6">
                    <h3 class="font-semibold mb-3">ì¤€ë¹„ ì‹œí—˜</h3>
                    <select class="w-full p-2 border rounded-lg">
                        <option>ìˆ˜ëŠ¥</option>
                        <option>í† ìµ</option>
                        <option>í† í”Œ</option>
                        <option>JLPT</option>
                        <option>ê¸°íƒ€</option>
                    </select>
                </div>
                
                <!-- Goal Setting -->
                <div class="mb-6">
                    <h3 class="font-semibold mb-3">ëª©í‘œ ì„¤ì •</h3>
                    <textarea class="w-full p-2 border rounded-lg h-20" placeholder="ë‚˜ì˜ í•™ìŠµ ëª©í‘œë¥¼ ì…ë ¥í•˜ì„¸ìš”...">ì„œìš¸ëŒ€í•™êµ ì»´í“¨í„°ê³µí•™ê³¼ í•©ê²©</textarea>
                </div>
                
                <!-- Academic Performance -->
                <div class="mb-6">
                    <h3 class="font-semibold mb-3">í˜„ì¬ ì„±ì </h3>
                    <div class="space-y-2">
                        <div class="flex justify-between">
                            <span>êµ­ì–´</span>
                            <select class="border rounded px-2">
                                <option>1ë“±ê¸‰</option>
                                <option>2ë“±ê¸‰</option>
                                <option>3ë“±ê¸‰</option>
                                <option>4ë“±ê¸‰</option>
                                <option>5ë“±ê¸‰</option>
                            </select>
                        </div>
                        <div class="flex justify-between">
                            <span>ìˆ˜í•™</span>
                            <select class="border rounded px-2">
                                <option>1ë“±ê¸‰</option>
                                <option>2ë“±ê¸‰</option>
                                <option selected>3ë“±ê¸‰</option>
                                <option>4ë“±ê¸‰</option>
                                <option>5ë“±ê¸‰</option>
                            </select>
                        </div>
                        <div class="flex justify-between">
                            <span>ì˜ì–´</span>
                            <select class="border rounded px-2">
                                <option>1ë“±ê¸‰</option>
                                <option selected>2ë“±ê¸‰</option>
                                <option>3ë“±ê¸‰</option>
                                <option>4ë“±ê¸‰</option>
                                <option>5ë“±ê¸‰</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Page -->
        <div class="page active" id="mainPage">
            <!-- Header -->
            <div class="gradient-header text-white p-4">
                <div class="flex items-center justify-between">
                    <h1 class="text-2xl font-bold">í¬ì¼“ìŒ¤</h1>
                    <button onclick="openMenu()" class="text-2xl">â˜°</button>
                </div>
            </div>

            <!-- Goal & Streak -->
            <div class="p-4 bg-white">
                <div class="bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-4 mb-4">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold text-gray-800">ë‚˜ì˜ ëª©í‘œ</h3>
                            <p class="text-sm text-gray-600">ì„œìš¸ëŒ€í•™êµ ì»´í“¨í„°ê³µí•™ê³¼ í•©ê²©</p>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-blue-600">15ì¼</div>
                            <div class="text-xs text-gray-500">ì—°ì† í•™ìŠµ ğŸ”¥</div>
                        </div>
                    </div>
                </div>

                <!-- Character Partner -->
                <div class="character-container p-6 mb-4">
                    <div class="text-center mb-4">
                        <h3 class="font-semibold text-white mb-2">ë‚´ íŒŒíŠ¸ë„ˆ</h3>
                        <button onclick="showPage('partnerPage')" class="character">
                            <div class="text-6xl">ğŸ¥š</div>
                        </button>
                        <p class="text-white text-sm mt-2">ì•Œ ë‹¨ê³„ (Lv.1)</p>
                    </div>
                    
                    <!-- Stats Toggle Button -->
                    <div class="text-center">
                        <button onclick="toggleStats()" id="statsToggle" class="text-white text-sm bg-white bg-opacity-20 px-4 py-2 rounded-full">
                            ìŠ¤í…Ÿ ë³´ê¸° â–¼
                        </button>
                    </div>
                    
                    <!-- Stats (Hidden by default) -->
                    <div id="partnerStats" class="space-y-3 mt-4" style="display: none;">
                        <div>
                            <div class="flex justify-between text-white text-sm mb-1">
                                <span id="statConcentration">ì§‘ì¤‘ë ¥</span>
                                <span>65/100</span>
                            </div>
                            <div class="stat-bar">
                                <div class="stat-fill bg-red-400" style="width: 65%"></div>
                            </div>
                        </div>
                        <div>
                            <div class="flex justify-between text-white text-sm mb-1">
                                <span id="statMemory">ê¸°ì–µë ¥</span>
                                <span>78/100</span>
                            </div>
                            <div class="stat-bar">
                                <div class="stat-fill bg-blue-400" style="width: 78%"></div>
                            </div>
                        </div>
                        <div>
                            <div class="flex justify-between text-white text-sm mb-1">
                                <span id="statProblemSolving">ë¬¸ì œí•´ê²°ë ¥</span>
                                <span>52/100</span>
                            </div>
                            <div class="stat-bar">
                                <div class="stat-fill bg-green-400" style="width: 52%"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Today's Goals -->
                <div class="bg-white rounded-xl border p-4 mb-4">
                    <h3 class="font-semibold mb-3">ì˜¤ëŠ˜ì˜ ëª©í‘œ</h3>
                    <div class="space-y-2">
                        <label class="flex items-center">
                            <input type="checkbox" class="mr-3 rounded">
                            <span class="text-sm">ìˆ˜í•™ ë¬¸ì œì§‘ 2ë‹¨ì› ì™„ë£Œ</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" checked class="mr-3 rounded">
                            <span class="text-sm line-through text-gray-500">ì˜ì–´ ë‹¨ì–´ 50ê°œ ì•”ê¸°</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" class="mr-3 rounded">
                            <span class="text-sm">êµ­ì–´ ë…ì„œ ì§€ë¬¸ 3ê°œ í’€ê¸°</span>
                        </label>
                    </div>
                    <button class="w-full mt-3 bg-blue-500 text-white py-2 rounded-lg text-sm">+ ëª©í‘œ ì¶”ê°€</button>
                </div>

                <!-- Study Time Tracker -->
                <div class="bg-white rounded-xl border p-4 mb-20">
                    <div class="flex items-center justify-between mb-3">
                        <h3 class="font-semibold">ì˜¤ëŠ˜ ê³µë¶€ ì‹œê°„</h3>
                        <span class="text-lg font-bold text-blue-600">3ì‹œê°„ 25ë¶„</span>
                    </div>
                    
                    <div class="space-y-3">
                        <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                            <div class="flex items-center">
                                <div class="w-4 h-4 subject-color-1 rounded mr-3"></div>
                                <span class="text-sm font-medium">ìˆ˜í•™</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <span class="text-sm text-gray-600">1ì‹œê°„ 20ë¶„</span>
                                <button onclick="startTimer('ìˆ˜í•™')" class="bg-blue-500 text-white px-3 py-1 rounded text-xs">ì‹œì‘</button>
                            </div>
                        </div>
                        
                        <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                            <div class="flex items-center">
                                <div class="w-4 h-4 subject-color-2 rounded mr-3"></div>
                                <span class="text-sm font-medium">ì˜ì–´</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <span class="text-sm text-gray-600">1ì‹œê°„ 15ë¶„</span>
                                <button onclick="startTimer('ì˜ì–´')" class="bg-blue-500 text-white px-3 py-1 rounded text-xs">ì‹œì‘</button>
                            </div>
                        </div>
                        
                        <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                            <div class="flex items-center">
                                <div class="w-4 h-4 subject-color-3 rounded mr-3"></div>
                                <span class="text-sm font-medium">êµ­ì–´</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <span class="text-sm text-gray-600">50ë¶„</span>
                                <button onclick="startTimer('êµ­ì–´')" class="bg-blue-500 text-white px-3 py-1 rounded text-xs">ì‹œì‘</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Partner Page -->
        <div class="page" id="partnerPage">
            <div class="gradient-header text-white p-4">
                <div class="flex items-center">
                    <button onclick="showPage('mainPage')" class="mr-3 text-xl">â†</button>
                    <h1 class="text-xl font-bold">ë‚´ íŒŒíŠ¸ë„ˆ</h1>
                </div>
            </div>
            
            <div class="p-4">
                <div class="character-container p-8 text-center mb-6">
                    <div class="character mb-4">
                        <div class="text-8xl">ğŸ¥š</div>
                    </div>
                    <h2 class="text-white text-xl font-bold mb-2">ì•Œ ë‹¨ê³„</h2>
                    <p class="text-white text-sm">ë ˆë²¨ 1 â€¢ ê²½í—˜ì¹˜ 45/100</p>
                    <div class="w-full bg-white bg-opacity-30 rounded-full h-2 mt-2">
                        <div class="bg-white h-2 rounded-full" style="width: 45%"></div>
                    </div>
                </div>
                
                <!-- Evolution Preview -->
                <div class="bg-white rounded-xl p-4 mb-4">
                    <h3 class="font-semibold mb-3">ì§„í™” ë‹¨ê³„</h3>
                    <div class="grid grid-cols-4 gap-4 text-center">
                        <div class="p-2">
                            <div class="text-2xl mb-1">ğŸ¥š</div>
                            <div class="text-xs text-blue-600 font-semibold">í˜„ì¬</div>
                        </div>
                        <div class="p-2 opacity-50">
                            <div class="text-2xl mb-1">ğŸ£</div>
                            <div class="text-xs">Lv.5</div>
                        </div>
                        <div class="p-2 opacity-50">
                            <div class="text-2xl mb-1">ğŸ¥</div>
                            <div class="text-xs">Lv.15</div>
                        </div>
                        <div class="p-2 opacity-50">
                            <div class="text-2xl mb-1">ğŸ¦…</div>
                            <div class="text-xs">Lv.30</div>
                        </div>
                    </div>
                </div>
                
                <!-- Detailed Stats -->
                <div class="bg-white rounded-xl p-4">
                    <h3 class="font-semibold mb-4">ìƒì„¸ ëŠ¥ë ¥ì¹˜</h3>
                    <div class="space-y-4">
                        <div>
                            <div class="flex justify-between mb-2">
                                <span class="text-sm font-medium">ì§‘ì¤‘ë ¥ (Concentration)</span>
                                <span class="text-sm text-gray-600">65/100</span>
                            </div>
                            <div class="stat-bar">
                                <div class="stat-fill bg-red-400" style="width: 65%"></div>
                            </div>
                            <p class="text-xs text-gray-500 mt-1">íƒ€ì´ë¨¸ ì—°ì† ì‚¬ìš©ìœ¼ë¡œ í–¥ìƒ â€¢ ê¸°ë³¸ ì†ë„ ì¦ê°€</p>
                        </div>
                        
                        <div>
                            <div class="flex justify-between mb-2">
                                <span class="text-sm font-medium">ê¸°ì–µë ¥ (Memory)</span>
                                <span class="text-sm text-gray-600">78/100</span>
                            </div>
                            <div class="stat-bar">
                                <div class="stat-fill bg-blue-400" style="width: 78%"></div>
                            </div>
                            <p class="text-xs text-gray-500 mt-1">ë³µìŠµ í€´ì¦ˆ ì •ë‹µë¥ ë¡œ í–¥ìƒ â€¢ ì•„ì´í…œ íš¨ê³¼ ì§€ì†ì‹œê°„ ì¦ê°€</p>
                        </div>
                        
                        <div>
                            <div class="flex justify-between mb-2">
                                <span class="text-sm font-medium">ë¬¸ì œí•´ê²°ë ¥ (Problem Solving)</span>
                                <span class="text-sm text-gray-600">52/100</span>
                            </div>
                            <div class="stat-bar">
                                <div class="stat-fill bg-green-400" style="width: 52%"></div>
                            </div>
                            <p class="text-xs text-gray-500 mt-1">AI íŠœí„° ë¬¸ì œ í’€ì´ë¡œ í–¥ìƒ â€¢ ì¥ì• ë¬¼ íšŒí”¼ í™•ë¥  ì¦ê°€</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Timer Page -->
        <div class="page" id="timerPage">
            <div class="gradient-header text-white p-4">
                <div class="flex items-center">
                    <button onclick="showPage('mainPage')" class="mr-3 text-xl">â†</button>
                    <h1 class="text-xl font-bold" id="timerPageTitle">ê³µë¶€ íƒ€ì´ë¨¸</h1>
                </div>
            </div>
            
            <div class="p-4">
                <!-- Timer Mode Selection -->
                <div class="flex mb-6 bg-gray-100 rounded-xl p-1">
                    <button onclick="switchTimerMode('pomodoro')" id="pomodoroBtn" class="flex-1 py-2 px-4 rounded-lg bg-blue-500 text-white font-semibold">
                        ë½€ëª¨ë„ë¡œ
                    </button>
                    <button onclick="switchTimerMode('stopwatch')" id="stopwatchBtn" class="flex-1 py-2 px-4 rounded-lg text-gray-600">
                        ìŠ¤í†±ì›Œì¹˜
                    </button>
                </div>
                
                <!-- Character -->
                <div class="character mb-6 text-center">
                    <div class="text-6xl">ğŸ¥š</div>
                </div>
                
                <!-- Pomodoro Mode -->
                <div id="pomodoroMode" class="text-center">
                    <!-- Time Setting -->
                    <div class="mb-6">
                        <label class="block text-sm font-medium mb-2" id="timeSettingLabel">ì§‘ì¤‘ ì‹œê°„ ì„¤ì •</label>
                        <div class="flex items-center justify-center space-x-4">
                            <button onclick="adjustTime(-5)" class="bg-gray-200 w-10 h-10 rounded-full">-</button>
                            <span class="text-2xl font-bold" id="timeDisplay">25ë¶„</span>
                            <button onclick="adjustTime(5)" class="bg-gray-200 w-10 h-10 rounded-full">+</button>
                        </div>
                    </div>
                    
                    <!-- Timer Circle -->
                    <div class="timer-circle mb-8" id="timerCircle">
                        <div class="timer-inner">
                            <div class="text-3xl font-bold" id="timerDisplay">25:00</div>
                            <div class="text-sm text-gray-500" id="currentSubject">ìˆ˜í•™</div>
                        </div>
                    </div>
                    
                    <!-- Timer Controls -->
                    <div class="space-y-4">
                        <button onclick="toggleTimer()" id="timerButton" class="w-full bg-blue-500 text-white py-4 rounded-xl text-lg font-semibold">
                            ì‹œì‘í•˜ê¸°
                        </button>
                        <button onclick="stopTimer()" class="w-full bg-red-500 text-white py-3 rounded-xl">
                            ê¸°ë¡ ì¤‘ë‹¨
                        </button>
                    </div>
                </div>
                
                <!-- Stopwatch Mode -->
                <div id="stopwatchMode" class="text-center" style="display: none;">
                    <!-- Stopwatch Display -->
                    <div class="mb-8">
                        <div class="text-6xl font-bold mb-2" id="stopwatchDisplay">00:00:00</div>
                        <div class="text-sm text-gray-500" id="stopwatchSubject">ìˆ˜í•™</div>
                    </div>
                    
                    <!-- Stopwatch Controls -->
                    <div class="space-y-4">
                        <button onclick="toggleStopwatch()" id="stopwatchButton" class="w-full bg-green-500 text-white py-4 rounded-xl text-lg font-semibold">
                            ì‹œì‘í•˜ê¸°
                        </button>
                        <button onclick="stopStopwatch()" class="w-full bg-red-500 text-white py-3 rounded-xl">
                            ê¸°ë¡ ì €ì¥
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Timetable Page -->
        <div class="page" id="timetablePage">
            <div class="gradient-header text-white p-4">
                <div class="flex items-center justify-between">
                    <div class="flex items-center">
                        <button onclick="showPage('mainPage')" class="mr-3 text-xl">â†</button>
                        <h1 class="text-xl font-bold">ì‹œê°„í‘œ</h1>
                    </div>
                    <button onclick="addSubject()" class="text-xl">+</button>
                </div>
            </div>
            
            <div class="p-4">
                <!-- Timetable Grid -->
                <div class="bg-white rounded-xl overflow-hidden">
                    <div class="grid grid-cols-6 text-xs">
                        <div class="p-2 bg-gray-100 text-center font-semibold">ì‹œê°„</div>
                        <div class="p-2 bg-gray-100 text-center font-semibold">ì›”</div>
                        <div class="p-2 bg-gray-100 text-center font-semibold">í™”</div>
                        <div class="p-2 bg-gray-100 text-center font-semibold">ìˆ˜</div>
                        <div class="p-2 bg-gray-100 text-center font-semibold">ëª©</div>
                        <div class="p-2 bg-gray-100 text-center font-semibold">ê¸ˆ</div>
                        
                        <!-- 9ì‹œ -->
                        <div class="timetable-cell p-2 bg-gray-50 text-center text-xs">9:00</div>
                        <div class="timetable-cell subject-color-1 text-white p-2">
                            <div class="text-xs font-semibold">ìˆ˜í•™</div>
                            <div class="text-xs opacity-80">ê¹€ì„ ìƒ</div>
                        </div>
                        <div class="timetable-cell"></div>
                        <div class="timetable-cell subject-color-2 text-white p-2">
                            <div class="text-xs font-semibold">ì˜ì–´</div>
                            <div class="text-xs opacity-80">ë°•ì„ ìƒ</div>
                        </div>
                        <div class="timetable-cell"></div>
                        <div class="timetable-cell subject-color-3 text-white p-2">
                            <div class="text-xs font-semibold">êµ­ì–´</div>
                            <div class="text-xs opacity-80">ì´ì„ ìƒ</div>
                        </div>
                        
                        <!-- 10ì‹œ -->
                        <div class="timetable-cell p-2 bg-gray-50 text-center text-xs">10:00</div>
                        <div class="timetable-cell"></div>
                        <div class="timetable-cell subject-color-4 text-white p-2">
                            <div class="text-xs font-semibold">ê³¼í•™</div>
                            <div class="text-xs opacity-80">ìµœì„ ìƒ</div>
                        </div>
                        <div class="timetable-cell"></div>
                        <div class="timetable-cell subject-color-1 text-white p-2">
                            <div class="text-xs font-semibold">ìˆ˜í•™</div>
                            <div class="text-xs opacity-80">ê¹€ì„ ìƒ</div>
                        </div>
                        <div class="timetable-cell"></div>
                        
                        <!-- 11ì‹œ -->
                        <div class="timetable-cell p-2 bg-gray-50 text-center text-xs">11:00</div>
                        <div class="timetable-cell subject-color-2 text-white p-2">
                            <div class="text-xs font-semibold">ì˜ì–´</div>
                            <div class="text-xs opacity-80">ë°•ì„ ìƒ</div>
                        </div>
                        <div class="timetable-cell"></div>
                        <div class="timetable-cell subject-color-5 text-white p-2">
                            <div class="text-xs font-semibold">ì‚¬íšŒ</div>
                            <div class="text-xs opacity-80">ì •ì„ ìƒ</div>
                        </div>
                        <div class="timetable-cell"></div>
                        <div class="timetable-cell subject-color-2 text-white p-2">
                            <div class="text-xs font-semibold">ì˜ì–´</div>
                            <div class="text-xs opacity-80">ë°•ì„ ìƒ</div>
                        </div>
                    </div>
                </div>
                
                <!-- Subject List -->
                <div class="mt-6">
                    <h3 class="font-semibold mb-3">ë“±ë¡ëœ ê³¼ëª©</h3>
                    <div class="space-y-2">
                        <div class="flex items-center justify-between p-3 bg-white rounded-lg">
                            <div class="flex items-center">
                                <div class="w-4 h-4 subject-color-1 rounded mr-3"></div>
                                <div>
                                    <div class="font-medium text-sm">ìˆ˜í•™</div>
                                    <div class="text-xs text-gray-500">ê¹€ì„ ìƒ</div>
                                </div>
                            </div>
                            <button class="text-red-500 text-sm">ì‚­ì œ</button>
                        </div>
                        
                        <div class="flex items-center justify-between p-3 bg-white rounded-lg">
                            <div class="flex items-center">
                                <div class="w-4 h-4 subject-color-2 rounded mr-3"></div>
                                <div>
                                    <div class="font-medium text-sm">ì˜ì–´</div>
                                    <div class="text-xs text-gray-500">ë°•ì„ ìƒ</div>
                                </div>
                            </div>
                            <button class="text-red-500 text-sm">ì‚­ì œ</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- AI Tutor Page -->
        <div class="page" id="tutorPage">
            <div class="gradient-header text-white p-4">
                <div class="flex items-center justify-between">
                    <div class="flex items-center">
                        <button onclick="showPage('mainPage')" class="mr-3 text-xl">â†</button>
                        <h1 class="text-xl font-bold">AI íŠœí„°</h1>
                    </div>
                    <button onclick="showPage('reviewPage')" class="text-sm bg-white bg-opacity-20 px-3 py-1 rounded-full">
                        ë³µìŠµí•˜ê¸°
                    </button>
                </div>
            </div>
            
            <div class="p-4 pb-24">
                <!-- Learning Analysis -->
                <div class="bg-white rounded-xl p-4 mb-4">
                    <div class="flex items-center justify-between mb-3">
                        <h3 class="font-semibold" id="analysisTitle">ğŸ“Š í•™ìŠµ ë¶„ì„</h3>
                        <button onclick="showDetailedAnalysis()" class="text-blue-500 text-sm" id="detailBtn">ìì„¸íˆ ë³´ê¸°</button>
                    </div>
                    <div class="space-y-2">
                        <div class="flex justify-between text-sm">
                            <span id="weakSubjectLabel">ê°€ì¥ ì–´ë ¤ì›Œí•˜ëŠ” ê³¼ëª©</span>
                            <span class="text-red-500 font-semibold">ìˆ˜í•™ (ì´ì°¨í•¨ìˆ˜)</span>
                        </div>
                        <div class="flex justify-between text-sm">
                            <span id="frequentQuestionLabel">ì§ˆë¬¸ì´ ë§ì€ ê°œë…</span>
                            <span class="text-orange-500 font-semibold">ì˜ì–´ ë¬¸ë²•</span>
                        </div>
                        <div class="flex justify-between text-sm">
                            <span id="recommendedSubjectLabel">ì¶”ì²œ í•™ìŠµ ê³¼ëª©</span>
                            <span class="text-blue-500 font-semibold">ì˜ì–´ í˜„ì¬ì™„ë£Œ</span>
                        </div>
                    </div>
                    <div class="mt-3 p-3 bg-blue-50 rounded-lg text-sm">
                        <p class="text-blue-700" id="studyAdvice">ğŸ’¡ ì˜ì–´ì˜ í˜„ì¬ì™„ë£Œ ë¬¸ë²•ì— ëŒ€í•œ ì§ˆë¬¸ì´ ë§ìœ¼ë‹ˆ í˜„ì¬ì™„ë£Œ ë¬¸ë²•ì„ ë” ê³µë¶€í•˜ì„¸ìš”</p>
                    </div>
                </div>
                
                <!-- Chat Interface -->
                <div class="bg-white rounded-xl p-4 mb-4">
                    <div id="chatContainer" class="h-64 overflow-y-auto mb-4 space-y-3">
                        <div class="chat-bubble">
                            <div class="flex items-start space-x-2">
                                <div class="w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center text-white text-sm font-bold">AI</div>
                                <div class="bg-gray-100 rounded-lg p-3 max-w-xs">
                                    <p class="text-sm">ì•ˆë…•í•˜ì„¸ìš”! í¬ì¼“ìŒ¤ AIì…ë‹ˆë‹¤. ì–´ë–¤ ê³µë¶€ë¥¼ ë„ì™€ë“œë¦´ê¹Œìš”? ğŸ¤–</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="flex space-x-2">
                        <input type="text" id="chatInput" placeholder="ì§ˆë¬¸ì„ ì…ë ¥í•˜ì„¸ìš”..." 
                               class="flex-1 px-3 py-2 border rounded-lg text-sm"
                               onkeypress="handleChatEnter(event)">
                        <button onclick="sendChatMessage()" class="bg-purple-500 text-white px-4 py-2 rounded-lg text-sm">
                            ì „ì†¡
                        </button>
                    </div>
                </div>
                
                <!-- Previous Questions -->
                <div class="bg-white rounded-xl p-4">
                    <h3 class="font-semibold mb-3" id="previousQuestionsTitle">ì§€ë‚œ ì§ˆë¬¸</h3>
                    <div class="space-y-2 max-h-40 overflow-y-auto" id="previousQuestionsList">
                        <div class="p-2 bg-gray-50 rounded-lg text-sm cursor-pointer" onclick="repeatQuestion('ìˆ˜í•™ ì´ì°¨í•¨ìˆ˜ì˜ ê¼­ì§“ì  êµ¬í•˜ëŠ” ë°©ë²•')">
                            <div class="font-medium text-gray-700">ìˆ˜í•™ ì´ì°¨í•¨ìˆ˜ì˜ ê¼­ì§“ì  êµ¬í•˜ëŠ” ë°©ë²•</div>
                            <div class="text-xs text-gray-500">2ì‹œê°„ ì „</div>
                        </div>
                        <div class="p-2 bg-gray-50 rounded-lg text-sm cursor-pointer" onclick="repeatQuestion('ì˜ì–´ í˜„ì¬ì™„ë£Œì™€ ê³¼ê±°ì™„ë£Œ ì°¨ì´ì ')">
                            <div class="font-medium text-gray-700">ì˜ì–´ í˜„ì¬ì™„ë£Œì™€ ê³¼ê±°ì™„ë£Œ ì°¨ì´ì </div>
                            <div class="text-xs text-gray-500">ì–´ì œ</div>
                        </div>
                        <div class="p-2 bg-gray-50 rounded-lg text-sm cursor-pointer" onclick="repeatQuestion('êµ­ì–´ ë…ì„œ ì§€ë¬¸ì—ì„œ ì£¼ì œ ì°¾ëŠ” ë°©ë²•')">
                            <div class="font-medium text-gray-700">êµ­ì–´ ë…ì„œ ì§€ë¬¸ì—ì„œ ì£¼ì œ ì°¾ëŠ” ë°©ë²•</div>
                            <div class="text-xs text-gray-500">3ì¼ ì „</div>
                        </div>
                    </div>
                    <button onclick="clearQuestionHistory()" class="w-full mt-3 text-gray-500 text-sm">
                        ì§ˆë¬¸ ê¸°ë¡ ì§€ìš°ê¸°
                    </button>
                </div>
            </div>
        </div>

        <!-- Review Page -->
        <div class="page" id="reviewPage">
            <div class="gradient-header text-white p-4">
                <div class="flex items-center">
                    <button onclick="showPage('tutorPage')" class="mr-3 text-xl">â†</button>
                    <h1 class="text-xl font-bold">ë³µìŠµ & ì˜¤ë‹µë…¸íŠ¸</h1>
                </div>
            </div>
            
            <div class="p-4">
                <!-- Weak Areas -->
                <div class="bg-white rounded-xl p-4 mb-4">
                    <h3 class="font-semibold mb-3">ğŸ¯ ì§‘ì¤‘ ë³µìŠµ ì˜ì—­</h3>
                    <div class="space-y-3">
                        <div class="p-3 bg-red-50 rounded-lg">
                            <div class="flex justify-between items-center">
                                <div>
                                    <div class="font-medium text-sm">ìˆ˜í•™ - ì´ì°¨í•¨ìˆ˜</div>
                                    <div class="text-xs text-gray-500">ì§ˆë¬¸ 8íšŒ â€¢ ì •ë‹µë¥  45%</div>
                                </div>
                                <button onclick="startReview('math')" class="bg-red-500 text-white px-3 py-1 rounded text-xs">
                                    ë³µìŠµí•˜ê¸°
                                </button>
                            </div>
                        </div>
                        
                        <div class="p-3 bg-orange-50 rounded-lg">
                            <div class="flex justify-between items-center">
                                <div>
                                    <div class="font-medium text-sm">ì˜ì–´ - í˜„ì¬ì™„ë£Œ</div>
                                    <div class="text-xs text-gray-500">ì§ˆë¬¸ 5íšŒ â€¢ ì •ë‹µë¥  62%</div>
                                </div>
                                <button onclick="startReview('english')" class="bg-orange-500 text-white px-3 py-1 rounded text-xs">
                                    ë³µìŠµí•˜ê¸°
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Review Quiz -->
                <div class="bg-white rounded-xl p-4" id="reviewQuiz" style="display: none;">
                    <h3 class="font-semibold mb-4">ë³µìŠµ í€´ì¦ˆ</h3>
                    <div class="mb-4">
                        <p class="text-sm mb-3" id="quizQuestion">ë‹¤ìŒ ì´ì°¨í•¨ìˆ˜ì˜ ê¼­ì§“ì ì„ êµ¬í•˜ì‹œì˜¤: y = xÂ² - 4x + 3</p>
                        <div class="space-y-2" id="quizOptions">
                            <button class="w-full text-left p-2 border rounded-lg hover:bg-gray-50" onclick="selectAnswer(1)">
                                â‘  (2, -1)
                            </button>
                            <button class="w-full text-left p-2 border rounded-lg hover:bg-gray-50" onclick="selectAnswer(2)">
                                â‘¡ (2, 1)
                            </button>
                            <button class="w-full text-left p-2 border rounded-lg hover:bg-gray-50" onclick="selectAnswer(3)">
                                â‘¢ (-2, -1)
                            </button>
                            <button class="w-full text-left p-2 border rounded-lg hover:bg-gray-50" onclick="selectAnswer(4)">
                                â‘£ (-2, 1)
                            </button>
                        </div>
                    </div>
                    <button onclick="submitAnswer()" class="w-full bg-blue-500 text-white py-2 rounded-lg">
                        ë‹µì•ˆ ì œì¶œ
                    </button>
                </div>
            </div>
        </div>

        <!-- Bottom Navigation -->
        <div class="bottom-nav">
            <div class="flex justify-around py-2">
                <button onclick="showPage('mainPage')" class="flex flex-col items-center p-2 text-blue-500">
                    <span class="text-xl">ğŸ </span>
                    <span class="text-xs" id="navHome">í™ˆ</span>
                </button>
                <button onclick="showPage('partnerPage')" class="flex flex-col items-center p-2 text-gray-500">
                    <span class="text-xl">ğŸ¥š</span>
                    <span class="text-xs" id="navPartner">íŒŒíŠ¸ë„ˆ</span>
                </button>
                <button onclick="showPage('tutorPage')" class="flex flex-col items-center p-2 text-gray-500">
                    <span class="text-xl">ğŸ¤–</span>
                    <span class="text-xs" id="navTutor">AIíŠœí„°</span>
                </button>
                <button onclick="showPage('timetablePage')" class="flex flex-col items-center p-2 text-gray-500">
                    <span class="text-xl">ğŸ“…</span>
                    <span class="text-xs" id="navTimetable">ì‹œê°„í‘œ</span>
                </button>
            </div>
        </div>
    </div>

    <script>
        let currentPage = 'mainPage';
        let timerInterval = null;
        let stopwatchInterval = null;
        let timerSeconds = 1500; // 25 minutes
        let stopwatchSeconds = 0;
        let isTimerRunning = false;
        let isStopwatchRunning = false;
        let currentSubject = 'ìˆ˜í•™';
        let selectedAnswer = null;
        let currentTimerMode = 'pomodoro';
        let pomodoroMinutes = 25;
        let statsVisible = false;
        
        // Language data
        const translations = {
            ko: {
                appName: 'í¬ì¼“ìŒ¤',
                settings: 'ì„¤ì •',
                language: 'ì–¸ì–´ ì„¤ì •',
                schoolInfo: 'í•™êµ ì •ë³´',
                schoolType: 'í•™êµ êµ¬ë¶„',
                grade: 'í•™ë…„',
                middle: 'ì¤‘í•™êµ',
                high: 'ê³ ë“±í•™êµ',
                examType: 'ì¤€ë¹„ ì‹œí—˜',
                goalSetting: 'ëª©í‘œ ì„¤ì •',
                currentGrades: 'í˜„ì¬ ì„±ì ',
                myGoal: 'ë‚˜ì˜ ëª©í‘œ',
                studyStreak: 'ì—°ì† í•™ìŠµ',
                myPartner: 'ë‚´ íŒŒíŠ¸ë„ˆ',
                todayGoals: 'ì˜¤ëŠ˜ì˜ ëª©í‘œ',
                studyTime: 'ì˜¤ëŠ˜ ê³µë¶€ ì‹œê°„',
                start: 'ì‹œì‘',
                concentration: 'ì§‘ì¤‘ë ¥',
                memory: 'ê¸°ì–µë ¥',
                problemSolving: 'ë¬¸ì œí•´ê²°ë ¥',
                statsView: 'ìŠ¤í…Ÿ ë³´ê¸°',
                statsHide: 'ìŠ¤í…Ÿ ìˆ¨ê¸°ê¸°',
                timerTitle: 'ê³µë¶€ íƒ€ì´ë¨¸',
                pomodoro: 'ë½€ëª¨ë„ë¡œ',
                stopwatch: 'ìŠ¤í†±ì›Œì¹˜',
                timeSettingLabel: 'ì§‘ì¤‘ ì‹œê°„ ì„¤ì •',
                navHome: 'í™ˆ',
                navPartner: 'íŒŒíŠ¸ë„ˆ',
                navTutor: 'AIíŠœí„°',
                navTimetable: 'ì‹œê°„í‘œ',
                analysisTitle: 'ğŸ“Š í•™ìŠµ ë¶„ì„',
                detailBtn: 'ìì„¸íˆ ë³´ê¸°',
                weakSubject: 'ê°€ì¥ ì–´ë ¤ì›Œí•˜ëŠ” ê³¼ëª©',
                frequentQuestion: 'ì§ˆë¬¸ì´ ë§ì€ ê°œë…',
                recommendedSubject: 'ì¶”ì²œ í•™ìŠµ ê³¼ëª©',
                studyAdvice: 'ğŸ’¡ ì˜ì–´ì˜ í˜„ì¬ì™„ë£Œ ë¬¸ë²•ì— ëŒ€í•œ ì§ˆë¬¸ì´ ë§ìœ¼ë‹ˆ í˜„ì¬ì™„ë£Œ ë¬¸ë²•ì„ ë” ê³µë¶€í•˜ì„¸ìš”',
                previousQuestions: 'ì§€ë‚œ ì§ˆë¬¸',
                goalText: 'ì„œìš¸ëŒ€í•™êµ ì»´í“¨í„°ê³µí•™ê³¼ í•©ê²©'
            },
            ja: {
                appName: 'ãƒã‚±ãƒƒãƒˆå…ˆç”Ÿ',
                settings: 'è¨­å®š',
                language: 'è¨€èªè¨­å®š',
                schoolInfo: 'å­¦æ ¡æƒ…å ±',
                schoolType: 'å­¦æ ¡åŒºåˆ†',
                grade: 'å­¦å¹´',
                middle: 'ä¸­å­¦æ ¡',
                high: 'é«˜ç­‰å­¦æ ¡',
                examType: 'æº–å‚™è©¦é¨“',
                goalSetting: 'ç›®æ¨™è¨­å®š',
                currentGrades: 'ç¾åœ¨ã®æˆç¸¾',
                myGoal: 'ç§ã®ç›®æ¨™',
                studyStreak: 'é€£ç¶šå­¦ç¿’',
                myPartner: 'ç§ã®ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼',
                todayGoals: 'ä»Šæ—¥ã®ç›®æ¨™',
                studyTime: 'ä»Šæ—¥ã®å‹‰å¼·æ™‚é–“',
                start: 'ã‚¹ã‚¿ãƒ¼ãƒˆ',
                concentration: 'é›†ä¸­åŠ›',
                memory: 'è¨˜æ†¶åŠ›',
                problemSolving: 'å•é¡Œè§£æ±ºåŠ›',
                statsView: 'ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤º',
                statsHide: 'ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹éè¡¨ç¤º',
                timerTitle: 'å‹‰å¼·ã‚¿ã‚¤ãƒãƒ¼',
                pomodoro: 'ãƒãƒ¢ãƒ‰ãƒ¼ãƒ­',
                stopwatch: 'ã‚¹ãƒˆãƒƒãƒ—ã‚¦ã‚©ãƒƒãƒ',
                timeSettingLabel: 'é›†ä¸­æ™‚é–“è¨­å®š',
                navHome: 'ãƒ›ãƒ¼ãƒ ',
                navPartner: 'ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼',
                navTutor: 'AIè¬›å¸«',
                navTimetable: 'æ™‚é–“å‰²',
                analysisTitle: 'ğŸ“Š å­¦ç¿’åˆ†æ',
                detailBtn: 'è©³ç´°ã‚’è¦‹ã‚‹',
                weakSubject: 'æœ€ã‚‚è‹¦æ‰‹ãªç§‘ç›®',
                frequentQuestion: 'è³ªå•ã®å¤šã„æ¦‚å¿µ',
                recommendedSubject: 'æ¨å¥¨å­¦ç¿’ç§‘ç›®',
                studyAdvice: 'ğŸ’¡ è‹±èªã®ç¾åœ¨å®Œäº†æ–‡æ³•ã«ã¤ã„ã¦ã®è³ªå•ãŒå¤šã„ã®ã§ã€ç¾åœ¨å®Œäº†æ–‡æ³•ã‚’ã‚‚ã£ã¨å‹‰å¼·ã—ã¦ãã ã•ã„',
                previousQuestions: 'éå»ã®è³ªå•',
                goalText: 'æ±äº¬å¤§å­¦å·¥å­¦éƒ¨åˆæ ¼'
            }
        };
        
        let currentLanguage = 'ko';
        
        // Stats Toggle Function
        function toggleStats() {
            const statsDiv = document.getElementById('partnerStats');
            const toggleBtn = document.getElementById('statsToggle');
            const t = translations[currentLanguage];
            
            if (statsVisible) {
                statsDiv.style.display = 'none';
                toggleBtn.textContent = t.statsView + ' â–¼';
                statsVisible = false;
            } else {
                statsDiv.style.display = 'block';
                toggleBtn.textContent = t.statsHide + ' â–²';
                statsVisible = true;
            }
        }
        
        // Language Change Function
        function changeLanguage(lang) {
            currentLanguage = lang;
            updateLanguage();
        }
        
        // Timer Mode Switch
        function switchTimerMode(mode) {
            currentTimerMode = mode;
            
            if (mode === 'pomodoro') {
                document.getElementById('pomodoroMode').style.display = 'block';
                document.getElementById('stopwatchMode').style.display = 'none';
                document.getElementById('pomodoroBtn').classList.add('bg-blue-500', 'text-white');
                document.getElementById('pomodoroBtn').classList.remove('text-gray-600');
                document.getElementById('stopwatchBtn').classList.remove('bg-blue-500', 'text-white');
                document.getElementById('stopwatchBtn').classList.add('text-gray-600');
            } else {
                document.getElementById('pomodoroMode').style.display = 'none';
                document.getElementById('stopwatchMode').style.display = 'block';
                document.getElementById('stopwatchBtn').classList.add('bg-blue-500', 'text-white');
                document.getElementById('stopwatchBtn').classList.remove('text-gray-600');
                document.getElementById('pomodoroBtn').classList.remove('bg-blue-500', 'text-white');
                document.getElementById('pomodoroBtn').classList.add('text-gray-600');
            }
        }
        
        // Adjust Pomodoro Time
        function adjustTime(minutes) {
            pomodoroMinutes = Math.max(5, Math.min(60, pomodoroMinutes + minutes));
            timerSeconds = pomodoroMinutes * 60;
            document.getElementById('timeDisplay').textContent = pomodoroMinutes + 'ë¶„';
            updateTimerDisplay();
            updateTimerCircle();
        }
        
        // Stopwatch Functions
        function toggleStopwatch() {
            if (isStopwatchRunning) {
                pauseStopwatch();
            } else {
                startStopwatch();
            }
        }
        
        function startStopwatch() {
            isStopwatchRunning = true;
            document.getElementById('stopwatchButton').textContent = 'ì¼ì‹œì •ì§€';
            
            stopwatchInterval = setInterval(() => {
                stopwatchSeconds++;
                updateStopwatchDisplay();
            }, 1000);
        }
        
        function pauseStopwatch() {
            isStopwatchRunning = false;
            clearInterval(stopwatchInterval);
            document.getElementById('stopwatchButton').textContent = 'ê³„ì†í•˜ê¸°';
        }
        
        function stopStopwatch() {
            isStopwatchRunning = false;
            clearInterval(stopwatchInterval);
            
            const hours = Math.floor(stopwatchSeconds / 3600);
            const minutes = Math.floor((stopwatchSeconds % 3600) / 60);
            
            if (stopwatchSeconds > 0) {
                alert(`${currentSubject} ${hours > 0 ? hours + 'ì‹œê°„ ' : ''}${minutes}ë¶„ì´ ê¸°ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!`);
            }
            
            stopwatchSeconds = 0;
            updateStopwatchDisplay();
            document.getElementById('stopwatchButton').textContent = 'ì‹œì‘í•˜ê¸°';
            showPage('mainPage');
        }
        
        function updateStopwatchDisplay() {
            const hours = Math.floor(stopwatchSeconds / 3600);
            const minutes = Math.floor((stopwatchSeconds % 3600) / 60);
            const seconds = stopwatchSeconds % 60;
            
            document.getElementById('stopwatchDisplay').textContent = 
                `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }
        
        // Detailed Analysis
        function showDetailedAnalysis() {
            alert('ğŸ“Š ìƒì„¸ ë¶„ì„\n\nìˆ˜í•™ ì´ì°¨í•¨ìˆ˜: 8íšŒ ì§ˆë¬¸, ì •ë‹µë¥  45%\nì˜ì–´ í˜„ì¬ì™„ë£Œ: 5íšŒ ì§ˆë¬¸, ì •ë‹µë¥  62%\nêµ­ì–´ ë…ì„œ: 3íšŒ ì§ˆë¬¸, ì •ë‹µë¥  78%\n\nì¶”ì²œ: ìˆ˜í•™ ì´ì°¨í•¨ìˆ˜ ê°œë… ë³µìŠµ í•„ìš”');
        }
        
        // Previous Questions
        function repeatQuestion(question) {
            document.getElementById('chatInput').value = question;
            sendChatMessage();
        }
        
        function clearQuestionHistory() {
            if (confirm('ì§ˆë¬¸ ê¸°ë¡ì„ ëª¨ë‘ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                document.getElementById('previousQuestionsList').innerHTML = '<p class="text-gray-500 text-center py-4">ì§ˆë¬¸ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</p>';
            }
        }

        // Page Navigation
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            document.getElementById(pageId).classList.add('active');
            currentPage = pageId;
            
            // Update bottom nav
            document.querySelectorAll('.bottom-nav button').forEach(btn => {
                btn.classList.remove('text-blue-500');
                btn.classList.add('text-gray-500');
            });
            
            if (pageId === 'mainPage') {
                document.querySelector('.bottom-nav button:nth-child(1)').classList.add('text-blue-500');
                document.querySelector('.bottom-nav button:nth-child(1)').classList.remove('text-gray-500');
            } else if (pageId === 'partnerPage') {
                document.querySelector('.bottom-nav button:nth-child(2)').classList.add('text-blue-500');
                document.querySelector('.bottom-nav button:nth-child(2)').classList.remove('text-gray-500');
            } else if (pageId === 'tutorPage') {
                document.querySelector('.bottom-nav button:nth-child(3)').classList.add('text-blue-500');
                document.querySelector('.bottom-nav button:nth-child(3)').classList.remove('text-gray-500');
            } else if (pageId === 'timetablePage') {
                document.querySelector('.bottom-nav button:nth-child(4)').classList.add('text-blue-500');
                document.querySelector('.bottom-nav button:nth-child(4)').classList.remove('text-gray-500');
            }
        }
        
        // Menu Functions
        function openMenu() {
            document.getElementById('menuOverlay').style.display = 'block';
            document.getElementById('menuPanel').classList.add('open');
        }
        
        function closeMenu() {
            document.getElementById('menuOverlay').style.display = 'none';
            document.getElementById('menuPanel').classList.remove('open');
        }
        
        // Timer Functions
        function startTimer(subject) {
            currentSubject = subject;
            document.getElementById('currentSubject').textContent = subject;
            showPage('timerPage');
        }
        
        function toggleTimer() {
            if (isTimerRunning) {
                pauseTimer();
            } else {
                startTimerCountdown();
            }
        }
        
        function startTimerCountdown() {
            isTimerRunning = true;
            document.getElementById('timerButton').textContent = 'ì¼ì‹œì •ì§€';
            
            timerInterval = setInterval(() => {
                timerSeconds--;
                updateTimerDisplay();
                updateTimerCircle();
                
                if (timerSeconds <= 0) {
                    completeTimer();
                }
            }, 1000);
        }
        
        function pauseTimer() {
            isTimerRunning = false;
            clearInterval(timerInterval);
            document.getElementById('timerButton').textContent = 'ê³„ì†í•˜ê¸°';
        }
        
        function stopTimer() {
            isTimerRunning = false;
            clearInterval(timerInterval);
            
            // Record study time
            const studiedMinutes = Math.floor((1500 - timerSeconds) / 60);
            if (studiedMinutes > 0) {
                alert(`${currentSubject} ${studiedMinutes}ë¶„ì´ ê¸°ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!`);
                updateStats(studiedMinutes);
            }
            
            // Reset timer
            timerSeconds = 1500;
            updateTimerDisplay();
            updateTimerCircle();
            document.getElementById('timerButton').textContent = 'ì‹œì‘í•˜ê¸°';
            
            showPage('mainPage');
        }
        
        function completeTimer() {
            isTimerRunning = false;
            clearInterval(timerInterval);
            alert('ğŸ‰ 25ë¶„ ê³µë¶€ ì™„ë£Œ! ì˜í–ˆì–´ìš”!');
            updateStats(25);
            
            // Reset timer
            timerSeconds = 1500;
            updateTimerDisplay();
            updateTimerCircle();
            document.getElementById('timerButton').textContent = 'ì‹œì‘í•˜ê¸°';
        }
        
        function updateTimerDisplay() {
            const minutes = Math.floor(timerSeconds / 60);
            const seconds = timerSeconds % 60;
            document.getElementById('timerDisplay').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }
        
        function updateTimerCircle() {
            const progress = ((1500 - timerSeconds) / 1500) * 360;
            document.getElementById('timerCircle').style.background = 
                `conic-gradient(#667eea ${progress}deg, #e0e0e0 ${progress}deg)`;
        }
        
        function updateStats(minutes) {
            // Update character stats based on study time
            const concentrationGain = Math.floor(minutes / 5);
            // This would update the actual stats in a real app
            console.log(`Concentration increased by ${concentrationGain}`);
        }
        
        // Chat Functions
        function handleChatEnter(event) {
            if (event.key === 'Enter') {
                sendChatMessage();
            }
        }
        
        function sendChatMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            addChatMessage(message, 'user');
            input.value = '';
            
            // Simulate AI response
            setTimeout(() => {
                generateAIResponse(message);
            }, 1000);
        }
        
        function quickQuestion(question) {
            document.getElementById('chatInput').value = question;
            sendChatMessage();
        }
        
        function addChatMessage(message, sender) {
            const chatContainer = document.getElementById('chatContainer');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'chat-bubble';
            
            if (sender === 'user') {
                messageDiv.innerHTML = `
                    <div class="flex items-start space-x-2 justify-end">
                        <div class="bg-blue-500 text-white rounded-lg p-3 max-w-xs">
                            <p class="text-sm">${message}</p>
                        </div>
                        <div class="w-8 h-8 bg-gray-400 rounded-full flex items-center justify-center text-white text-sm font-bold">ë‚˜</div>
                    </div>
                `;
            } else {
                messageDiv.innerHTML = `
                    <div class="flex items-start space-x-2">
                        <div class="w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center text-white text-sm font-bold">AI</div>
                        <div class="bg-gray-100 rounded-lg p-3 max-w-xs">
                            <p class="text-sm">${message}</p>
                        </div>
                    </div>
                `;
            }
            
            chatContainer.appendChild(messageDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }
        
        function generateAIResponse(userMessage) {
            let response = '';
            
            if (userMessage.includes('ìˆ˜í•™') || userMessage.includes('ì´ì°¨í•¨ìˆ˜')) {
                response = 'ìˆ˜í•™ ì´ì°¨í•¨ìˆ˜ì— ëŒ€í•´ ì„¤ëª…ë“œë¦´ê²Œìš”! ì´ì°¨í•¨ìˆ˜ëŠ” y = axÂ² + bx + c í˜•íƒœë¡œ, aê°’ì— ë”°ë¼ í¬ë¬¼ì„ ì˜ ëª¨ì–‘ì´ ê²°ì •ë©ë‹ˆë‹¤. ê¼­ì§“ì  ê³µì‹ì€ x = -b/2a ì…ë‹ˆë‹¤. ë” ìì„¸í•œ ì„¤ëª…ì´ í•„ìš”í•˜ì‹œë©´ ë§ì”€í•´ì£¼ì„¸ìš”! ğŸ“Š';
            } else if (userMessage.includes('ì˜ì–´') || userMessage.includes('ë¬¸ë²•')) {
                response = 'ì˜ì–´ ë¬¸ë²• ë„ì›€ë“œë¦´ê²Œìš”! í˜„ì¬ì™„ë£ŒëŠ” have/has + ê³¼ê±°ë¶„ì‚¬ í˜•íƒœë¡œ, ê³¼ê±°ì— ì‹œì‘ë˜ì–´ í˜„ì¬ê¹Œì§€ ì˜í–¥ì„ ë¯¸ì¹˜ëŠ” ìƒí™©ì„ í‘œí˜„í•©ë‹ˆë‹¤. ì˜ˆ: "I have studied English for 3 years." ì–´ë–¤ ë¶€ë¶„ì´ ë” ê¶ê¸ˆí•˜ì‹ ê°€ìš”? ğŸ“š';
            } else if (userMessage.includes('êµ­ì–´') || userMessage.includes('ë…ì„œ')) {
                response = 'êµ­ì–´ ë…ì„œ ì§€ë¬¸ í’€ì´ë²•ì„ ì•Œë ¤ë“œë¦´ê²Œìš”! 1) ì§€ë¬¸ì„ ë¹ ë¥´ê²Œ í›‘ì–´ë³´ë©° ì£¼ì œ íŒŒì•… 2) ë¬¸ì œë¥¼ ë¨¼ì € ì½ê³  í•µì‹¬ í‚¤ì›Œë“œ í™•ì¸ 3) ì§€ë¬¸ì—ì„œ ê·¼ê±° ì°¾ê¸° 4) ì„ íƒì§€ ë¹„êµ ë¶„ì„. ì°¨ê·¼ì°¨ê·¼ ì—°ìŠµí•´ë³´ì„¸ìš”! ğŸ“–';
            } else if (userMessage.includes('ê³¼í•™') || userMessage.includes('í™”í•™')) {
                response = 'ê³¼í•™ í™”í•™ ë°˜ì‘ì‹ ë„ì›€ë“œë¦´ê²Œìš”! í™”í•™ ë°˜ì‘ì‹ì„ ì“¸ ë•ŒëŠ” 1) ë°˜ì‘ë¬¼ê³¼ ìƒì„±ë¬¼ í™•ì¸ 2) ì›ì ê°œìˆ˜ ë§ì¶”ê¸° 3) ê³„ìˆ˜ ì¡°ì •í•˜ê¸° ìˆœì„œë¡œ ì§„í–‰í•˜ë©´ ë©ë‹ˆë‹¤. êµ¬ì²´ì ì¸ ë°˜ì‘ì‹ì´ ìˆë‹¤ë©´ í•¨ê»˜ í’€ì–´ë³¼ê¹Œìš”? ğŸ§ª';
            } else {
                response = 'ì¢‹ì€ ì§ˆë¬¸ì´ë„¤ìš”! êµ¬ì²´ì ìœ¼ë¡œ ì–´ë–¤ ë¶€ë¶„ì´ ê¶ê¸ˆí•˜ì‹ ì§€ ì•Œë ¤ì£¼ì‹œë©´ ë” ìì„¸íˆ ë„ì™€ë“œë¦´ ìˆ˜ ìˆì–´ìš”. ìˆ˜í•™, ì˜ì–´, êµ­ì–´, ê³¼í•™ ë“± ì–´ë–¤ ê³¼ëª©ì´ë“  ì–¸ì œë“  ë¬¼ì–´ë³´ì„¸ìš”! ğŸ’ª';
            }
            
            addChatMessage(response, 'ai');
        }
        
        // Review Functions
        function startReview(subject) {
            document.getElementById('reviewQuiz').style.display = 'block';
            
            if (subject === 'math') {
                document.getElementById('quizQuestion').textContent = 'ë‹¤ìŒ ì´ì°¨í•¨ìˆ˜ì˜ ê¼­ì§“ì ì„ êµ¬í•˜ì‹œì˜¤: y = xÂ² - 4x + 3';
            } else if (subject === 'english') {
                document.getElementById('quizQuestion').textContent = 'ë‹¤ìŒ ì¤‘ í˜„ì¬ì™„ë£Œ ì‹œì œê°€ ì˜¬ë°”ë¥´ê²Œ ì‚¬ìš©ëœ ë¬¸ì¥ì€?';
                document.getElementById('quizOptions').innerHTML = `
                    <button class="w-full text-left p-2 border rounded-lg hover:bg-gray-50" onclick="selectAnswer(1)">
                        â‘  I have went to school yesterday.
                    </button>
                    <button class="w-full text-left p-2 border rounded-lg hover:bg-gray-50" onclick="selectAnswer(2)">
                        â‘¡ I have been to Paris twice.
                    </button>
                    <button class="w-full text-left p-2 border rounded-lg hover:bg-gray-50" onclick="selectAnswer(3)">
                        â‘¢ I have go to the store.
                    </button>
                    <button class="w-full text-left p-2 border rounded-lg hover:bg-gray-50" onclick="selectAnswer(4)">
                        â‘£ I have going there.
                    </button>
                `;
            }
        }
        
        function selectAnswer(answerNum) {
            selectedAnswer = answerNum;
            
            // Visual feedback
            document.querySelectorAll('#quizOptions button').forEach((btn, index) => {
                btn.classList.remove('bg-blue-100', 'border-blue-500');
                if (index + 1 === answerNum) {
                    btn.classList.add('bg-blue-100', 'border-blue-500');
                }
            });
        }
        
        function submitAnswer() {
            if (!selectedAnswer) {
                alert('ë‹µì„ ì„ íƒí•´ì£¼ì„¸ìš”!');
                return;
            }
            
            // Check answer (simplified)
            const correctAnswer = 1; // For math question: (2, -1)
            
            if (selectedAnswer === correctAnswer) {
                alert('ğŸ‰ ì •ë‹µì…ë‹ˆë‹¤! ì˜í–ˆì–´ìš”!');
                // Update memory stat
            } else {
                alert('âŒ í‹€ë ¸ìŠµë‹ˆë‹¤. ë‹¤ì‹œ í•œë²ˆ ìƒê°í•´ë³´ì„¸ìš”!');
            }
            
            // Reset quiz
            document.getElementById('reviewQuiz').style.display = 'none';
            selectedAnswer = null;
        }
        
        // Timetable Functions
        function addSubject() {
            const subjectName = prompt('ê³¼ëª©ëª…ì„ ì…ë ¥í•˜ì„¸ìš”:');
            const teacherName = prompt('ì„ ìƒë‹˜ ì„±í•¨ì„ ì…ë ¥í•˜ì„¸ìš”:');
            
            if (subjectName && teacherName) {
                alert(`${subjectName} (${teacherName}) ê³¼ëª©ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!`);
                // In a real app, this would update the timetable
            }
        }
        
        function updateLanguage() {
            const t = translations[currentLanguage];
            
            // Update main elements
            document.querySelector('.gradient-header h1').textContent = t.appName;
            document.getElementById('settingLanguage').textContent = t.language;
            document.getElementById('settingSchool').textContent = t.schoolInfo;
            document.getElementById('schoolTypeLabel').textContent = t.schoolType;
            document.getElementById('gradeLabel').textContent = t.grade;
            
            // Update school type options
            const schoolTypeSelect = document.getElementById('schoolType');
            schoolTypeSelect.options[0].textContent = t.middle;
            schoolTypeSelect.options[1].textContent = t.high;
            
            // Update grade options
            const gradeSelect = document.getElementById('grade');
            for (let i = 0; i < gradeSelect.options.length; i++) {
                gradeSelect.options[i].textContent = (i + 1) + (currentLanguage === 'ja' ? 'å¹´ç”Ÿ' : 'í•™ë…„');
            }
            
            // Update stats labels
            document.getElementById('statConcentration').textContent = t.concentration;
            document.getElementById('statMemory').textContent = t.memory;
            document.getElementById('statProblemSolving').textContent = t.problemSolving;
            
            // Update stats toggle button
            const statsToggle = document.getElementById('statsToggle');
            if (statsVisible) {
                statsToggle.textContent = t.statsHide + ' â–²';
            } else {
                statsToggle.textContent = t.statsView + ' â–¼';
            }
            
            // Update timer page
            document.getElementById('timerPageTitle').textContent = t.timerTitle;
            document.getElementById('pomodoroBtn').textContent = t.pomodoro;
            document.getElementById('stopwatchBtn').textContent = t.stopwatch;
            document.getElementById('timeSettingLabel').textContent = t.timeSettingLabel;
            
            // Update navigation
            document.getElementById('navHome').textContent = t.navHome;
            document.getElementById('navPartner').textContent = t.navPartner;
            document.getElementById('navTutor').textContent = t.navTutor;
            document.getElementById('navTimetable').textContent = t.navTimetable;
            
            // Update AI tutor page
            document.getElementById('analysisTitle').textContent = t.analysisTitle;
            document.getElementById('detailBtn').textContent = t.detailBtn;
            document.getElementById('weakSubjectLabel').textContent = t.weakSubject;
            document.getElementById('frequentQuestionLabel').textContent = t.frequentQuestion;
            document.getElementById('recommendedSubjectLabel').textContent = t.recommendedSubject;
            document.getElementById('studyAdvice').textContent = t.studyAdvice;
            document.getElementById('previousQuestionsTitle').textContent = t.previousQuestions;
            
            // Update goal text
            const goalElements = document.querySelectorAll('.text-gray-600');
            goalElements.forEach(el => {
                if (el.textContent.includes('ì„œìš¸ëŒ€í•™êµ') || el.textContent.includes('æ±äº¬å¤§å­¦')) {
                    el.textContent = t.goalText;
                }
            });
            
            // Update exam type options for Japanese
            if (currentLanguage === 'ja') {
                const examSelect = document.querySelector('select');
                if (examSelect && examSelect.options[0].textContent === 'ìˆ˜ëŠ¥') {
                    examSelect.options[0].textContent = 'å¤§å­¦å…¥å­¦å…±é€šãƒ†ã‚¹ãƒˆ';
                    examSelect.options[1].textContent = 'TOEIC';
                    examSelect.options[2].textContent = 'TOEFL';
                    examSelect.options[3].textContent = 'JLPT';
                    examSelect.options[4].textContent = 'ãã®ä»–';
                }
            } else {
                const examSelect = document.querySelector('select');
                if (examSelect && examSelect.options[0].textContent === 'å¤§å­¦å…¥å­¦å…±é€šãƒ†ã‚¹ãƒˆ') {
                    examSelect.options[0].textContent = 'ìˆ˜ëŠ¥';
                    examSelect.options[1].textContent = 'í† ìµ';
                    examSelect.options[2].textContent = 'í† í”Œ';
                    examSelect.options[3].textContent = 'JLPT';
                    examSelect.options[4].textContent = 'ê¸°íƒ€';
                }
            }
        }
        
        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            updateTimerDisplay();
            updateTimerCircle();
            
            // Add goal checkbox functionality
            document.addEventListener('change', function(e) {
                if (e.target.type === 'checkbox') {
                    const label = e.target.nextElementSibling;
                    if (e.target.checked) {
                        label.classList.add('line-through', 'text-gray-500');
                    } else {
                        label.classList.remove('line-through', 'text-gray-500');
                    }
                }
            });
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9699f036c3bc329c',t:'MTc1NDI2NzM0NS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
